
;
; TTY I/O CONSTANTS
;

SER0_CPORT	EQU 	0F5H
SER1_CPORT  EQU     0F7H               

SER_MODE	EQU		4EH
SER_CMD		EQU		05H

INTR_PORT	EQU		0FCH
INTR_MASK	EQU		0FFH

FPAN_PORT	EQU		0FFH

RAM_ADDR	EQU		00100H
ROM_ADDR	EQU		0F800H


	ORG	0000H          ;LOCATE AT TOP

COLD_BOOT:
	DI
	MVI		A, INTR_MASK
	OUT		INTR_PORT
	
	MVI		A, SER_MODE
	OUT 	SER0_CPORT
	OUT		SER1_CPORT
	
	MVI		A, SER_CMD
	OUT		SER0_CPORT
	OUT		SER1_CPORT
	
	MVI		C, RAM_END - RAM_RES
	LXI		H, RAM_ADDR
	LXI		D, RAM_RES
	
RES_COPY:
	LDAX	D
	MOV		M, A
	INR		L
	INR		E
	DCR		C
	JNZ		RES_COPY
	JMP		RAM_ADDR
	
RAM_RES:
	OUT		FPAN_PORT
	JMP		ROM_ADDR
RAM_END:
	
	